# i3wm 設定のメモ

いろいろ面倒くさいのですよね。

TILではないのですが、ちょっとずつ追記していくかもしれません。

## -X xorg の時の問題

### なんか処理が遅い

日本語入力している時とか、emacs でキー移動しているときとか、不定期に固まるので、
非常に重く感じます。何が原因なのでしょうね？

ときとき固まるので、何か悪い子がいるとおもうのですが（例えば何かが定期的に失敗しているとか）、
まだよくわかっていません。

xfceでは発生していないので、i3wm環境の構築にしくじっているのだと思うのですが、なんでしょうかねぇ。

次の xmodmap の問題がより悪化させているように感じますが、本当かどうかはよくわかりません。
どうなんでしょう。

### .config/i3/config 中で xmodmap すると マウスアイコンが長い間ぐるぐる回る

原因不明です。

crouton の keyboard パッケージがインストールされていると Search キーが OverLay1_Enable になってしまいます。
mod が押せないと端末もだせない i3 ですので、起動時に xmodmap でなんとかしたいところですが、
それをやるとマウスアイコンがぐるぐるしっぱなしです。

負荷がかかりっぱなしになっているのですかね？


### Ctrl と Super のスワップ

xiwi 環境ですと ChromeOS側のキースワッパーが聞くのですが、xorg で起動しているときはそうではないので
両立させるにはどうすればいいのですかねぇ。

ちなみに私が使っているのは、

```
clear control
clear mod4

keycode 133 = Control_L
keycode 37 = Super_L
keycode 105 = Overlay1_Enable

add control = Control_L Control_R
add mod4 = Super_L
```

という感じ。

.Xmodmap ファイルをおけばいいと思うのですが、xiwi のときはややこしいことになりそうです。

### キーボードを入力中にタッチパッドが反応してしまう

Chromebook Flip C302CA はタッチパッドが大きいので、キーボードの入力中に、特に右手の親指の付け根あたりが
触ってしまうことがあります。

ChromeOS にいる時はこの誤動作が発生しません。いろいろ試してみると、どうも「触り始め」は端のラインは反応しないようになっています。
真ん中で触り始めてから端にスススッとすれば反応します。タッチパッドのユースケースを考えるとうまく出来てるなぁと思います。

が、これは ChromeOSにいる時だけで、xorgで端末を切り替えてしまうとこの機能はなくなってしまいます。

## -X xiwi の時の問題

### Ctrl-Space が勝手にキーリピート

これは、ChromeOS 55 以降で発生しているみたいですね。Android対応と関係してるのかなぁ？

一応回避方法があって、ChromeOSの「キーボード」が1種類しかないとき(= Google 日本語入力を選択肢として無効にしてしまう）場合は、この問題は発生しません。


### Super が取れない

ChromeOSにとっての Super は、Search なのですが、これはChromeOSにとっては特別で、
だからか、アプリモードウインドウでもキャプチャーできないのかなぁ？と考えています。

よくわからないですけどね。
